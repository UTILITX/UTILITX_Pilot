Perfect ğŸ‘ â€” hereâ€™s your **UTILITX Dev Hygiene Checklist** in clean Markdown format, ready to paste into your Git Workflow or OneNote.
Itâ€™s concise, production-grade, and tuned specifically for your UTILITX stack (Next.js + Supabase + Esri + Vercel).

---

# ğŸ§¼ UTILITX Dev Hygiene Checklist

## ğŸ§­ 1. Branch & Version Control

**Goal:** Keep local, staging, and deployed versions perfectly aligned.

âœ… **Workflow**

```bash
# Always start fresh
git checkout main
git pull origin main

# Create a new branch for each feature or fix
git checkout -b feature/<short-descriptive-name>

# Commit small, clear chunks
git add .
git commit -m "feat: add Esri popout modal"

# Merge cleanly back into main
git checkout main
git merge feature/<short-descriptive-name>
git push origin main
```

âœ… **Best Practices**

* Keep branches short-lived (<1 week)
* Pull from `main` *before* starting new work
* Delete branches after merge to avoid drift

---

## âš™ï¸ 2. Environment Variables

**Goal:** Match Vercel â†’ Local â†’ Git template exactly.

âœ… **Checklist**

* Copy all live variables from **Vercel â†’ Settings â†’ Environment Variables**
* Paste into `.env.local`
* Keep a public `.env.template` in Git (no secrets):

  ```
  NEXT_PUBLIC_SUPABASE_URL=
  NEXT_PUBLIC_SUPABASE_ANON_KEY=
  NEXT_PUBLIC_SUPABASE_BUCKET=
  NEXT_PUBLIC_WORKAREA_LAYER_URL=
  NEXT_PUBLIC_RECORDS_LAYER_URL=
  NEXT_PUBLIC_ARCGIS_API_KEY=
  ```

âœ… **Tip:**
Restart VS Code / terminal after editing `.env.local` â€” cached values can linger.

---

## ğŸ§ª 3. Build & Test in Production Mode

**Goal:** Catch â€œworks in dev, fails in deployâ€ issues early.

âœ… **Commands**

```bash
# Clean build cache
Remove-Item -Recurse -Force .next, node_modules
npm install

# Production build test
npm run build
npx serve out
```

âœ… **Confirm**

* âœ… Esri map and popouts load
* âœ… Upload â†’ Supabase works
* âœ… No console errors in browser

---

## ğŸ§° 4. Pre-Commit Health Check

| Check                                    | Why                                   |
| ---------------------------------------- | ------------------------------------- |
| âœ… Local build succeeds (`npm run build`) | Prevent broken deploys                |
| âœ… Env vars match Vercel                  | Avoid silent 403s / undefined errors  |
| âœ… Upload flow works end-to-end           | Confirm Supabase + ArcGIS integration |
| âœ… Esri basemap + layers visible          | Confirm API keys + URLs               |
| âœ… Commit is descriptive                  | Clean Git history                     |
| âœ… Merged into main                       | Syncs with deployment                 |

---

## ğŸŒ 5. Deployment Hygiene

**Goal:** Keep deployment behavior predictable.

âœ… **Rules**

* Vercel should deploy **only from `main`**
* (Optional) Create a `staging` branch for preview deploys
* Donâ€™t hot-fix in Vercel UI â€” always commit â†’ push â†’ redeploy

---

## ğŸ§± 6. Quick Recovery (If Things Desync)

If local behaves differently from deployment:

```bash
git fetch origin
git checkout main
git pull origin main
Remove-Item -Recurse -Force .next, node_modules
npm install
npm run build
npx serve out
```

â†’ This rebuilds from the exact same commit as production.

---

## ğŸ§  7. Optional Add-Ons

* Add `.env.template` and `README.md` to repo root
* Enable **Vercel â†’ GitHub Deploy Hooks** to auto-trigger deploys on `main`
* Add Mixpanel or Sentry tags for deployment tracking

---

### âœ… TL;DR

**Stable flow =**

```
pull â†’ branch â†’ code â†’ build â†’ test â†’ merge â†’ deploy
```

---

Would you like me to add a short **â€œGit Commit Message Conventionâ€** section (so your history reads like a changelog: `feat:`, `fix:`, `chore:` etc.) at the end of this checklist? It pairs perfectly with this doc.
