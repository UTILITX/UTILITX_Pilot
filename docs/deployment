Excellent question â€” and this is exactly where most teams trip up between â€œit works locallyâ€ and â€œitâ€™s live.â€ Youâ€™re thinking like a production-ready founder now ğŸ‘

Hereâ€™s your **clean UTILITX pilot workflow** for Firebase + Git + local dev â€” so you can confidently make changes, test, and redeploy without confusion or broken builds.

---

## ğŸ§­ OVERVIEW: Your Deployment Flow

| Step                  | Environment                     | Command                            | Purpose                              |
| --------------------- | ------------------------------- | ---------------------------------- | ------------------------------------ |
| **1. Develop**        | Local (`localhost:3000`)        | `npm run dev`                      | Fast feedback, hot reload            |
| **2. Commit**         | Local â†’ Git                     | `git add . && git commit -m "msg"` | Save version history                 |
| **3. Build / Export** | Local (optional)                | `npm run build && npm run export`  | Generate static site for preview     |
| **4. Deploy**         | Firebase Hosting                | `firebase deploy`                  | Publish latest `/out` folder         |
| **5. Verify**         | `https://utilitx-pilot.web.app` | â€”                                  | Ensure live site matches local build |

---

## ğŸ§± 1ï¸âƒ£ Local Development (Fast Iteration)

You always start here:

```bash
npm run dev
```

* Runs Next.js in dev mode
* Live reloads any code or CSS change
* No need to build or deploy during iteration

Use this for all coding, UI tweaks, map tests, etc.

---

## ğŸš§ 2ï¸âƒ£ Build for Production Preview

When your changes look good locally, do a â€œproduction build checkâ€:

```bash
npm run build && npm run export
```

This creates a static folder (`/out`) thatâ€™s *exactly* what Firebase will host.
You can even preview it locally:

```bash
npx serve out
```

â†’ open `http://localhost:5000` to see what your deployed app will look like.

---

## ğŸš€ 3ï¸âƒ£ Deploy to Firebase

Once youâ€™ve verified everything:

```bash
firebase deploy
```

That pushes the `/out` folder to Firebase Hosting.

Firebase will show:

```
âœ” Deploy complete!
Hosting URL: https://utilitx-pilot.web.app
```

> ğŸ”¹ Tip: No need to re-init Firebase or login again each time.
> ğŸ”¹ It will only upload changed files.

---

## ğŸ”„ 4ï¸âƒ£ Continuous Flow (daily work)

Hereâ€™s your **standard loop**:

```bash
# 1. Work locally
npm run dev

# 2. Commit changes
git add .
git commit -m "Fix popup UI and file upload"

# 3. Test production build
npm run build && npm run export

# 4. Deploy to Firebase
firebase deploy
```

Thatâ€™s it â€” same 4 steps every time.

---

## ğŸ§© 5ï¸âƒ£ Optional Automation (when ready)

If you want Firebase to auto-deploy on `git push main`:

```bash
firebase hosting:github
```

It sets up a GitHub Action like this:

```yaml
on:
  push:
    branches:
      - main
```

So any push triggers:

```
npm ci
npm run build && npm run export
firebase deploy --token $FIREBASE_TOKEN
```

This way, you just `git push`, and Firebase updates automatically ğŸ¯

---

## ğŸ§  Common Gotchas

| Issue                         | Fix                                                                         |
| ----------------------------- | --------------------------------------------------------------------------- |
| Changes not showing live      | Run `npm run build && firebase deploy` â€” the dev server doesnâ€™t auto-deploy |
| Wrong env vars                | Make sure only `NEXT_PUBLIC_` vars go into `.env.production`                |
| Cached site                   | Refresh with `Ctrl+Shift+R` or append `?v=2` to the URL                     |
| â€œPermission deniedâ€ on deploy | Run `firebase login` again (auth tokens expire)                             |

---

## âœ… TL;DR (UTILITX Firebase Flow)

```bash
# Dev locally
npm run dev

# Build for production
npm run build && npm run export

# Deploy to Firebase
firebase deploy

# Commit + push to GitHub
git add .
git commit -m "Your message"
git push
```

Thatâ€™s your clean, repeatable flow â€” used by real teams building production apps.

---

Would you like me to make you a **short â€œDeploy.mdâ€** file (1-pager) you can drop in your repo so anyone on your team can follow the exact same flow?



Perfect ğŸ‘ â€” hereâ€™s your **`DEPLOY.md`** â€” a concise, professional 1-pager you can drop straight into your UTILITX repo.
It explains exactly how to develop, build, and deploy using Firebase, Git, and your existing Next.js setup.

---

# ğŸš€ UTILITX Deployment Guide (Firebase + Next.js)

### ğŸ“¦ Overview

This project uses **Next.js** for the frontend and **Firebase Hosting** for deployment.
Supabase, ArcGIS, and other services remain external â€” Firebase hosts only the **web client**.

---

## ğŸ§­ 1. Environments

| Environment               | Purpose                  | URL / Command                                                  |
| ------------------------- | ------------------------ | -------------------------------------------------------------- |
| **Local Dev**             | Fast iteration & testing | `npm run dev` â†’ [http://localhost:3000](http://localhost:3000) |
| **Production (Firebase)** | Pilot-ready live site    | [https://utilitx-pilot.web.app](https://utilitx-pilot.web.app) |

---

## ğŸ› ï¸ 2. Local Development

Start the development server:

```bash
npm run dev
```

This enables hot reloading for code and style changes.
Use this mode for building new components, UI flows, or debugging the map.

---

## ğŸ§± 3. Build for Production Preview

Before deployment, verify your build locally:

```bash
npm run build && npm run export
```

Preview it:

```bash
npx serve out
```

â†’ open [http://localhost:5000](http://localhost:5000) to confirm the static export looks correct.

This `/out` folder is exactly what Firebase will host.

---

## ğŸš€ 4. Deploy to Firebase

Push the latest version live:

```bash
firebase deploy
```

Youâ€™ll see:

```
âœ”  Deploy complete!
Hosting URL: https://utilitx-pilot.web.app
```

---

## ğŸ” 5. Standard Workflow

Repeat this loop for all updates:

```bash
# 1. Work locally
npm run dev

# 2. Commit changes
git add .
git commit -m "Describe your update"

# 3. Build + test production
npm run build && npm run export
OR npx serve@latest output

# 4. Deploy live
firebase deploy
```

---

## âš™ï¸ 6. GitHub Integration (Optional)

To enable **auto-deploy on every push to `main`**:

```bash
firebase hosting:github
```

This creates a GitHub Action that automatically builds and deploys when code is pushed.


ğŸ§  Stability tip going forward

Before working on a new feature branch:

git pull origin main
git checkout -b feature/new-feature


That way every branch starts from the same baseline as production â€” fewer â€œwhy is mine different?â€ moments.
---

## ğŸ”’ 7. Environment Variables

* Keep `.env` in your local machine only (never commit it).
* Only expose keys prefixed with `NEXT_PUBLIC_` to the frontend.
* Example:

  ```
  NEXT_PUBLIC_ARCGIS_API_KEY=...
  NEXT_PUBLIC_SUPABASE_URL=...
  NEXT_PUBLIC_SUPABASE_ANON_KEY=...
  ```

---

## ğŸ§¹ 8. Common Issues

| Issue                         | Fix                                                                   |
| ----------------------------- | --------------------------------------------------------------------- |
| Changes not appearing live    | Run `npm run build && firebase deploy` (dev mode doesnâ€™t auto-deploy) |
| â€œPermission deniedâ€ on deploy | Run `firebase login` again                                            |
| Cached UI                     | Force refresh with **Ctrl + Shift + R**                               |
| Wrong .env vars               | Check `.env.production` matches Firebase live keys                    |

---

## ğŸ§© Folder Summary

| Folder           | Purpose                              |
| ---------------- | ------------------------------------ |
| `/pages`         | Next.js routes                       |
| `/components`    | React components (UI, map, etc.)     |
| `/public`        | Static assets                        |
| `/out`           | Built static export (auto-generated) |
| `/firebase.json` | Firebase hosting config              |

---

## âœ… Deployment Checklist

* [ ] App runs locally (`npm run dev`)
* [ ] `next build && next export` succeeds
* [ ] Firebase deploys without errors
* [ ] Live URL matches local behavior
* [ ] GitHub is updated (`git push origin main`)

---

**Maintainer:** UTILITX Product Team
**Last Updated:** November 2025

---

Would you like me to also generate a matching **`.github/workflows/firebase-hosting.yml`** (for automatic deploys when you push to `main`)?
Itâ€™s a 10-line workflow file you can drop in immediately.
